<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>s3eNOpenFeint: s3eNOpenFeint - OpenFeint extension for Marmalade by Nerdiacs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">s3eNOpenFeint&#160;<span id="projectnumber">1.0</span></div>
   <div id="projectbrief">OpenFeint Marmalade Extension by Nerdiacs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('index.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">s3eNOpenFeint - OpenFeint extension for Marmalade by Nerdiacs </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The OpenFeint Marmalade Extension project. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Copyright (C) 2011 Nerdiacs Pte Limited</dd>
<dd>
This library is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 3.0 of the License, or (at your option) any later version.</dd>
<dd>
This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</dd>
<dd>
You should have received a copy of the GNU Lesser General Public License along with this library; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</dd></dl>
<h2><a class="anchor" id="sec_1"></a>
Supported Platforms</h2>
<p>This extension currently only supports iOS SDK.</p>
<p><a class="el" href="main.html#sec_2">Compiling the extension</a></p>
<p><a class="el" href="main.html#sec_3">Compiling your App with Extension</a></p>
<p><a class="el" href="main.html#sec_4">Using extension in your code</a></p>
<p><a class="el" href="main.html#sec_5">Changelog</a></p>
<h2><a class="anchor" id="sec_2"></a>
Compiling the extension</h2>
<p>Run the mkb file to generate the xcode project etc. Open xcode project settings. Add new group(drag and drop) openfeint source code directory as shown in screenshot. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Use option "Create groups for any added folder".</dd></dl>
<div class="image">
<img src="shot_xcode_openfeint_group.png" alt="shot_xcode_openfeint_group.png"/>
</div>
<p> Open Build Settings and go to Precompile Prefix Header option. Disable precompile header file by selecting NO and then specify OpenFeint's prefix header in the option Prefix Header as shown in diagram.</p>
<div class="image">
<img src="shot_xcode_s3enopenfeint_buildsettings.png" alt="shot_xcode_s3enopenfeint_buildsettings.png"/>
</div>
<p>Make sure you use same compile architecture as your application. At the time of writing this documentation, the default compile architecture by Marmalade was armv6 so we forced our settings to use armv6 for extension as well.</p>
<div class="image">
<img src="xcode_shot_compile_armv6.png" alt="xcode_shot_compile_armv6.png"/>
</div>
<p>The compilation of project should go just fine and Debug library created in lib directory.</p>
<h2><a class="anchor" id="sec_3"></a>
Compiling your App with Extension</h2>
<p>Include the s3eNOpenFeint as subproject in your mkb file. Put openfeint_offline_config.xml in data folder of project that you download from your OpenFeint developer account. Also include OFResources_Universal.bundle in the data folder. You might want to strip out unnecessary UI from this bundle to reduce binary size.</p>
<h2><a class="anchor" id="sec_4"></a>
Using extension in your code</h2>
<p>The API functions as close to OpenFeint's own API as possible. It is highly recommended to also keep original OpenFeint documentation open to understand how OpenFeint works.</p>
<p><a class="el" href="main.html#sec_4_1">Initialisation</a></p>
<p><a class="el" href="main.html#sec_4_2">Checking if user is logged in and has approved OpenFeint</a></p>
<p><a class="el" href="main.html#sec_4_3">Invoking Dashboard(s)</a></p>
<p><a class="el" href="main.html#sec_4_4">Creating challenges</a></p>
<p><a class="el" href="main.html#sec_4_5">Playing a challenge</a></p>
<p><a class="el" href="main.html#sec_4_6">Using Leaderboards</a></p>
<p><a class="el" href="main.html#sec_4_7">Using Achievements</a></p>
<dl class="note"><dt><b>Note:</b></dt><dd>The API never shares any of its allocated memory with API consumer for the life of Application. The API will deallocate portion of memory allocated by it after callbacks to API Consumer. So, always make a shallow copy of data if you need to refer to it later. Usually this is needed for challenge Definitions.</dd></dl>
<h3><a class="anchor" id="sec_4_1"></a>
Initialisation</h3>
<p>Check for Extension's availability by calling <a class="el" href="group___n_open_feint_api_group.html#ga6b912a16b413186f3387e8e9a95bcb21">s3eNOpenFeintAvailable</a>. Then register for callbacks using <a class="el" href="group___n_open_feint_api_group.html#ga15c3278f021ef1cdbc4f2b522444cc90">s3eNOpenFeintRegister</a> that your app is interested in. Have a look at enum s3eNOpenFeintCallback and Delegates in original OpenFeint API docs. </p>
<div class="fragment"><pre class="fragment"> <span class="keyword">static</span> int32 playerLoggedIn(<span class="keywordtype">void</span> *systemData, <span class="keywordtype">void</span> *userData) 
 {
        <span class="keywordflow">if</span>(systemData)
        {
                <a class="code" href="structs3e_n_o_f_player_info.html">s3eNOFPlayerInfo</a> *info = (<a class="code" href="structs3e_n_o_f_player_info.html">s3eNOFPlayerInfo</a>*)systemData;
                AppendMessage(<span class="stringliteral">&quot;PlayerId received is %s&quot;</span>, info-&gt;playerId);
        }
        
        <span class="keywordflow">return</span> 0;
 }
 
 <a class="code" href="group___n_open_feint_api_group.html#ga15c3278f021ef1cdbc4f2b522444cc90">s3eNOpenFeintRegister</a>(S3E_NOPENFEINT_CALLBACK_PLAYER_LOGGEDIN, &amp;playerLoggedIn, NULL);
</pre></div><p>App should initialize OpenFeint by calling function <a class="el" href="group___n_open_feint_api_group.html#gab565578b04e0056a8ce477a9b848a94c">s3eNOFinitializeWithProductKey</a>.</p>
<h3><a class="anchor" id="sec_4_2"></a>
Checking if user is logged in and has approved OpenFeint</h3>
<p><a class="el" href="group___n_open_feint_api_group.html#ga90b0d5b1df4a437f8c337a61ae7c4678">s3eNOFisOnline</a> tells if user is online. <a class="el" href="group___n_open_feint_api_group.html#gaffce9d737cb62d66c7cf64873b1c2aee">s3eNOFhasUserApprovedFeint</a> tells if user has approved OpenFeint. It is recommended to check for approval before calling other API.</p>
<h3><a class="anchor" id="sec_4_3"></a>
Invoking Dashboard(s)</h3>
<p>Calling s3eNOFlaunchDashboard simply invokes the main dashboard of OpenFeint </p>
<div class="fragment"><pre class="fragment">                <a class="code" href="group___n_open_feint_api_group.html#gad5908d8a536ccc2304a9844bc63f71e6">s3eNOFlaunchDashboard</a>();
</pre></div><p> if you want to open to a specific page no dashboard then use its respective API call. for example <a class="el" href="group___n_open_feint_api_group.html#ga10d29137246b18a6b0aa0f14190eafc8">s3eNOFlaunchDashboardWithAchievementsPage</a> for achievements page <a class="el" href="group___n_open_feint_api_group.html#ga298064bb113bc28f0f11dfa88f261ffe">s3eNOFlaunchDashboardWithChallengesPage</a> for challenges</p>
<p>There are a lot more of such API. Refer to documentation of API.</p>
<h3><a class="anchor" id="sec_4_4"></a>
Creating challenges</h3>
<p>Challenges is one of the most important features of OpenFeint. To create a challenge first you need to download all challenge definitions from OpenFeint server using the API <a class="el" href="group___n_open_feint_api_group.html#ga3b6050107c6b8a85bbc40a99efdc0bbb">s3eNOFdownloadAllChallengeDefinitions</a>. The challenge definitions are stored by s3eNOpenFeint extension in its own array and provided as <a class="el" href="structs3e_n_o_f_array.html">s3eNOFArray</a> to callback S3E_NOPENFEINT_CALLBACK_DID_DOWNLOAD_ALL_CHALLENGE_DEFINITIONS</p>
<div class="fragment"><pre class="fragment"> <span class="keyword">static</span> int32 didDownloadAllChallengeDefinitions(<span class="keywordtype">void</span> *systemData, <span class="keywordtype">void</span> *userData)
 {
        <span class="keywordflow">if</span>(!systemData)
        {
                AppendMessage(<span class="stringliteral">&quot;Downloaded all challenges with 0 items&quot;</span>);
                <span class="keywordflow">return</span> 0;
        }
                
        <a class="code" href="structs3e_n_o_f_array.html">s3eNOFArray</a> *defArray = (<a class="code" href="structs3e_n_o_f_array.html">s3eNOFArray</a>*)systemData;
        AppendMessage(<span class="stringliteral">&quot;AllChallengeDefinitions Downloaded with count %d&quot;</span> , defArray-&gt;m_count);
        <span class="keywordflow">for</span> (uint i=0; i &lt; defArray-&gt;m_count; i++) {
                AppendMessage(<span class="stringliteral">&quot;Challenge %s, appId %s, iconUrl %s, multiAttempt %d&quot;</span>,
                                          ((<a class="code" href="structs3e_n_o_f_challenge_definition.html">s3eNOFChallengeDefinition</a>*)defArray-&gt;m_items)[i].title,
                                          ((<a class="code" href="structs3e_n_o_f_challenge_definition.html">s3eNOFChallengeDefinition</a>*)defArray-&gt;m_items)[i].clientApplicationId,
                                          ((<a class="code" href="structs3e_n_o_f_challenge_definition.html">s3eNOFChallengeDefinition</a>*)defArray-&gt;m_items)[i].iconUrl,
                                          ((<a class="code" href="structs3e_n_o_f_challenge_definition.html">s3eNOFChallengeDefinition</a>*)defArray-&gt;m_items)[i].multiAttempt);
        }
        <span class="comment">// Copy all challengedefs to local variable for later use</span>
        <span class="keywordflow">return</span> 0;
 }
</pre></div><p>Use <a class="el" href="group___n_open_feint_api_group.html#ga396467328a4a70b44493263ceffec609">s3eNOFdisplayAndSendChallenge</a> to let user send challenge to the friends using OpenFeint UI.</p>
<h3><a class="anchor" id="sec_4_5"></a>
Playing a challenge</h3>
<p>The challenge can be invoked/accepted by user from dashboard UI. The notification that user wants to play a challenge is received as callback S3E_NOPENFEINT_CALLBACK_USER_LAUNCHED_CHALLENGE.</p>
<div class="fragment"><pre class="fragment"> <span class="keyword">static</span> int32 userLaunchedChallenge(<span class="keywordtype">void</span> *systemData, <span class="keywordtype">void</span> *userData)
 {
        <span class="keywordflow">if</span> (!systemData) {
                <span class="keywordflow">return</span> -1;
        }
        <a class="code" href="structs3e_n_o_f_challenge_to_user.html">s3eNOFChallengeToUser</a> *nofChalToUser = (<a class="code" href="structs3e_n_o_f_challenge_to_user.html">s3eNOFChallengeToUser</a>*)systemData;
        AppendMessage(<span class="stringliteral">&quot;Challenge %s from %s to %s with id %s&quot;</span>, 
                                  nofChalToUser-&gt;challenge-&gt;challengeDefinition-&gt;title,
                                  nofChalToUser-&gt;challenge-&gt;challenger-&gt;name,
                                  nofChalToUser-&gt;recipient-&gt;name,
                                  nofChalToUser-&gt;nofPersistentId);
        strncpy(persistentChallengeId,nofChalToUser-&gt;nofPersistentId,<span class="keyword">sizeof</span>(persistentChallengeId));
        <span class="keywordflow">return</span> 0;
 }
</pre></div><p>After challenge is complete and you want to post the result of challenge post the challenge result using API <a class="el" href="group___n_open_feint_api_group.html#gac0bbac15d2f5955c47e4b1c97de9041d">s3eNOFchallengeCompleteWithResult</a> to OpenFeint. After this call <a class="el" href="group___n_open_feint_api_group.html#ga5d1d6b1cc48e419f5b2c70008ebb7a27">s3eNOFchallengeDisplayCompletionWithData</a> to let user submit data for challenge.</p>
<h3><a class="anchor" id="sec_4_6"></a>
Using Leaderboards</h3>
<p>Leaderboards or highscore is a simple API to use. Simply use <a class="el" href="group___n_open_feint_api_group.html#gab867b2aef6d359907508f9db15dc46b1">s3eNOFsubmitHighScore</a> API to update highscore. The leaderboard id is the unique id on OpenFeint developer account.</p>
<h3><a class="anchor" id="sec_4_7"></a>
Using Achievements</h3>
<p>The list of achievements is downloaded by OpenFeint at initialization time and contains the status/progress of current user in percentage for a particular achievement. Use <a class="el" href="group___n_open_feint_api_group.html#ga00f8721dad47b69383090091a37ed97e">s3eNOFachievements</a> to get the list of achievements.</p>
<p>If your achievement is a progress based achievement which doesn't simply gets unlocked then use API <a class="el" href="group___n_open_feint_api_group.html#ga08d7542b314ea594515cffa2dd86374d">s3eNOFupdateAcheivementProgressionComplete</a>. If you simply want to unlock an achievement then use API <a class="el" href="group___n_open_feint_api_group.html#ga007858ccc16ba9fddaa18af73d68f399">s3eNOFachievementUnlock</a></p>
<p>There are a lot of other functions in this API. Refer to documentation.</p>
<h2><a class="anchor" id="sec_5"></a>
Changelog</h2>
<p>Date September 08, 2011</p>
<ul>
<li>Challenges API</li>
<li>Achievements API</li>
<li>Leaderboards API</li>
<li>Different types of dashboards </li>
</ul>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Fri Sep 9 2011 02:23:36 for s3eNOpenFeint by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
